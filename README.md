# Test_Project
Тестовое задание (Веб) для НПО Марс
Приложение разработано с помощью фреймворка Spring Boot и СУБД MSSQL.

# База данных
В качестве СУБД выступает MSSQL, а также есть возможность использования H2.
Сущности (4) : Product(Изделие), 
               MaterialComponent(МиК),  
               ProductMC(Применение МиКов в изделиях) (внешние зависимости - Изделие, МиК), 
               Purchase (Закупка МиКов) (внешние зависимости - Применение МиКов, Изделие).

Для каждой сущности есть интерфейс репозиторий, который наследуется от JpaRepository. В репозитории сущности Закупки (PurchaseRepository) добавлены 3 метода: 1) Получение всех закупок период (getReportForPeriod) - принимает номер продукта, название МиКа, начальную и конечную дату
                                                                                                  и делает выборку исходя из номера продукта, названия МиКа(с учётом части слова и без учёта регистра) и периода.
                                                                                               2) Получение начальной стоимости (getStartCost) - принимает номер продукта, номер МиКа, начальную и конечную дату
                                                                                                  и ищет цену закупки с минимальной датой в периоде, исходя из номера продукта и номер МиКа
                                                                                               3) Получение конечной стоимости (getEndCost) - принимает номер продукта, номер МиКа, начальную и конечную дату
                                                                                                  и ищет цену закупки с максимальной датой в периоде, исходя из номера продукта и номер МиКа
# Бизнес - логика
Для всех сущностей созданы сервисы с CRUD операциями. В сервисе закупки (PurchaseService) добавлены 3 метода для  получения всех закупок период (getReportForPeriod), получение нач. стоимости (getStartCost) и 
получение конечной стоимости (getEndCost). Возварщают вызов метода из репозитория (PurchaseRepository).
Добавлены классы для каждой сущности, унаследованные от RuntimeException, которые определяют поведение при получении ошибки об отстутствии элемента с данным Id.  

# Фронтенд

В качестве фронтенд части использован шаблонизатор для динамической вёрстке на сервере - Thymeleaf. Созданы 2 шаблона: 1) index.html - начальная страница с вводом данных от пользователя.
                                                                                                                          Использует get запрос для получения списка изделий.
                                                                                                                          Отправляет post запрос с данными для таблицы.
                                                                                                                       2) report.html - страница с отображением таблицы

# Контроллер
Имеет два метода: на получение всех изделий (GET), на получение данных от клиента и формирования закупок по этим данным (POST). Использует ReportDTO для вывода данных пользователю

# Тестовые данные
В качестве тестовых данных реализован класс DataLoader, реализующий интерфейс CommandLiner, который с помощью CRUD операций сервисов, добавляет данные.
